<div class="loader" *ngIf="loader">
  <div class="l-bcg"></div>
  <span class="dot"></span>
  <div class="dots">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<div class="wrap">
  <div class="wrap-blur">
    <app-nav-bar></app-nav-bar>

    <!-- <div class="content-section implementation carousel-demo">
      <div class="card">
          <p-carousel [value]="fetchedMovies" styleClass="custom-carousel">
              <ng-template let-fetchedMovie pTemplate="item">
                <div class="item card">
                  <img src="{{fetchedMovie[6]}}" class="card-img-top" alt="...">
                  <div class="card-body">
                    <h5 class="card-title">{{fetchedMovie[3]}}</h5>
                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                    <a href="#" class="btn btn-primary">Go somewhere</a>
                  </div>
                </div>
              </ng-template>
          </p-carousel>
      </div>
    </div> -->

    <!-- <div id="carousel" class="carousel slide" data-ride="carousel">
      <ol class="carousel-indicators">
        <li data-target="#carousel" *ngFor="let movie of fetchedPopularMovies; let index = index" data-slide-to="index"></li>
      </ol>
      <div class="carousel-inner">
        <div class="carousel-item" *ngFor="let movie of fetchedPopularMovies;let index = index; let isFirst = first" [ngClass]="{active:isFirst}">
           <img src="http://image.tmdb.org/t/p/original{{movie[6]}}"
                    class="d-block w-100 carousel-pic" alt="baner">
        </div>
      </div>
      <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div> -->

    <carousel [loop]="true" [cellsToShow]="2" [height]="400">
      <div class="carousel-cell" *ngFor="let movie of fetchedPopularMovies">
        <!-- <div class="wow"> -->
        <img src="http://image.tmdb.org/t/p/original{{ movie[6] }}" />
        <h2 class="carousel-title">{{ movie[3] }}</h2>
        <!-- </div> -->
      </div>
    </carousel>
    <h2>Polecane dla ciebie</h2>
    <carousel [loop]="true" [cellsToShow]="4" [height]="400">
      <div class="carousel-cell" *ngFor="let movie of fetchedMovies">
        <!-- <div class="wow"> -->
        <img src="http://image.tmdb.org/t/p/original{{ movie[0][6] }}" />
        <h2 class="carousel-title">{{ movie[0][3] }}</h2>
        <!-- </div> -->
      </div>
    </carousel>

    <div class="text-center">
      <h1>Baza filmów</h1>
    </div>

    <div class="container">
      <div class="row">
        <h3>Baza filmów</h3>
      </div>
      <div class="row">
        <div *ngIf="!fetchedAllMovies">
          <h3>Loading..</h3>
          <div class="loader"></div>
        </div>
        <div
          class="cards col-sm"
          *ngFor="let movie of pageOfItems; let i = index"
        >
          <div class="card">
            <img
              class="card-img"
              src="http://image.tmdb.org/t/p/w500{{ movie[2] }}"
              alt="Card image"
            />
            <div class="card_overlay">
              <div class="card_header">
                <div class="card_header-text">
                  <h3 class="card_title">{{ movie[3] }}</h3>
                  <p class="card-text">{{ movie[5] }}</p>
                </div>
              </div>
              <p class="card_description">
                {{ movie[7] }}
              </p>
              <a
                href="#{{ i }}"
                data-toggle="modal"
                class="btn btn-primary"
                (click)="this.currentRate(this.movie[0])"
                >Oceń</a
              >
            </div>
          </div>
          <!-- Modal -->
          <div class="modal" id="{{ i }}">
            <div class="modal-dialog">
              <!-- Modal content-->
              <div class="modal-content">
                <div class="modal-header">
                  <h4 class="modal-title">{{ movie[3] }}</h4>
                  <button type="button" class="close" data-dismiss="modal">
                    &times;
                  </button>
                </div>
                <div class="modal-body">
                  <p>
                    {{ movie[1] }}
                  </p>
                  <ngb-rating
                    class="rating-stars"
                    (click)="this.rateItem(this.movie[0])"
                    [max]="10"
                    [(rate)]="this.currentStars"
                    [(ngModel)]="ratedValue"
                  ></ngb-rating>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- <mat-paginator
          [length]="5"
          [pageSizeOptions]="[3, 5, 10]"
          (changePage)="onChangePage($event)
        >
        </mat-paginator> -->
      <jw-pagination
        [items]="fetchedAllMovies"
        [pageSize]="25"
        (changePage)="onChangePage($event)"
      ></jw-pagination>
    </div>
  </div>
</div>
